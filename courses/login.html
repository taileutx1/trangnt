<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ƒêƒÉng nh·∫≠p - TAILIEUTX1</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#ec4899',
            accent: '#f472b6',
            danger: '#dc2626',
            success: '#10b981'
          }
        }
      }
    }
  </script>
</head>

<body class="bg-gradient-to-br from-pink-50 to-purple-50 min-h-screen flex flex-col">

  <!-- Main -->
  <div class="flex-1 flex items-center justify-center px-4">
    <div class="bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden">

      <!-- Header -->
      <div class="bg-gradient-to-r from-primary to-accent text-white p-8 text-center">
        <h1 class="text-4xl font-black">TAILIEUTX1</h1>
        <p class="mt-2 opacity-90">ƒêƒÉng nh·∫≠p t√†i kho·∫£n</p>
      </div>

      <div class="p-8">

        <!-- LOGIN FORM -->
        <div id="loginForm" class="space-y-6">

          <input
            id="email"
            type="email"
            placeholder="Email"
            class="w-full px-5 py-4 border-2 border-pink-200 rounded-2xl
                   focus:border-primary focus:outline-none transition"
          />

          <input
            id="password"
            type="password"
            placeholder="M·∫≠t kh·∫©u (‚â• 6 k√Ω t·ª±)"
            class="w-full px-5 py-4 border-2 border-pink-200 rounded-2xl
                   focus:border-primary focus:outline-none transition"
          />

          <p class="text-right">
            <button id="forgotBtn" class="text-sm text-primary hover:underline">
              Qu√™n m·∫≠t kh·∫©u?
            </button>
          </p>

          <button
            id="loginBtn"
            class="w-full py-4 bg-gradient-to-r from-primary to-accent
                   text-white font-bold rounded-2xl
                   hover:opacity-90 transition
                   flex items-center justify-center gap-2"
          >
            <span id="loginText">ƒêƒÉng nh·∫≠p</span>
            <svg id="loginSpinner" class="hidden animate-spin w-5 h-5" viewBox="0 0 24 24" fill="none">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" class="opacity-25"/>
              <path fill="currentColor" class="opacity-75" d="M4 12a8 8 0 018-8v8z"/>
            </svg>
          </button>

          <!-- Social -->
          <div class="space-y-3 pt-2">
            <button
              id="googleBtn"
              class="w-full py-4 rounded-2xl font-bold
                     flex items-center justify-center gap-3
                     border border-gray-300 hover:bg-gray-50 transition"
            >
              <img src="https://www.svgrepo.com/show/475656/google-color.svg" class="w-6 h-6">
              Ti·∫øp t·ª•c v·ªõi Google
            </button>

            <button
              id="facebookBtn"
              class="w-full py-4 rounded-2xl font-bold
                     flex items-center justify-center gap-3
                     bg-[#1877F2] text-white hover:opacity-90 transition"
            >
              Facebook
            </button>
          </div>

          <p class="text-center text-sm pt-4">
            Ch∆∞a c√≥ t√†i kho·∫£n?
            <button id="showRegister" class="text-primary font-semibold hover:underline">
              ƒêƒÉng k√Ω ngay
            </button>
          </p>
        </div>

        <!-- REGISTER FORM -->
        <div id="registerForm" class="space-y-6 hidden">

          <input
            id="regName"
            type="text"
            placeholder="H·ªç v√† t√™n"
            class="w-full px-5 py-4 border-2 border-pink-200 rounded-2xl
                   focus:border-primary focus:outline-none transition"
          />

          <input
            id="regEmail"
            type="email"
            placeholder="Email"
            class="w-full px-5 py-4 border-2 border-pink-200 rounded-2xl
                   focus:border-primary focus:outline-none transition"
          />

          <input
            id="regPassword"
            type="password"
            placeholder="M·∫≠t kh·∫©u (‚â• 6 k√Ω t·ª±)"
            class="w-full px-5 py-4 border-2 border-pink-200 rounded-2xl
                   focus:border-primary focus:outline-none transition"
          />

          <button
            id="registerBtn"
            class="w-full py-4 bg-gradient-to-r from-primary to-accent
                   text-white font-bold rounded-2xl
                   hover:opacity-90 transition
                   flex items-center justify-center gap-2"
          >
            <span id="registerText">T·∫°o t√†i kho·∫£n</span>
            <svg id="registerSpinner" class="hidden animate-spin w-5 h-5" viewBox="0 0 24 24" fill="none">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" class="opacity-25"/>
              <path fill="currentColor" class="opacity-75" d="M4 12a8 8 0 018-8v8z"/>
            </svg>
          </button>

          <p class="text-center text-sm">
            ƒê√£ c√≥ t√†i kho·∫£n?
            <button id="showLogin" class="text-primary font-semibold hover:underline">
              ƒêƒÉng nh·∫≠p
            </button>
          </p>
        </div>

        <p id="message" class="text-center font-medium mt-6 min-h-[1.5em]"></p>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-gradient-to-r from-primary to-accent text-white py-6 text-center text-sm">
    ¬© 2025 Developed by Ph·∫°m Nh·∫≠t Huy
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  const SUPABASE_URL = 'https://wdpekgcqmwpvbfyonjih.supabase.co';
  const SUPABASE_ANON_KEY = 'YOUR_ANON_KEY';
  const REDIRECT_URL = `${window.location.origin}/trangnt/courses/index1.html`;

  const supabaseClient = supabase.createClient(
    SUPABASE_URL,
    SUPABASE_ANON_KEY
  );

  /* ===== ELEMENTS ===== */
  const loginForm = document.getElementById('loginForm');
  const registerForm = document.getElementById('registerForm');
  const messageEl = document.getElementById('message');

  const loginBtn = document.getElementById('loginBtn');
  const loginText = document.getElementById('loginText');
  const loginSpinner = document.getElementById('loginSpinner');

  const registerBtn = document.getElementById('registerBtn');
  const registerText = document.getElementById('registerText');
  const registerSpinner = document.getElementById('registerSpinner');

  /* ===== HELPERS ===== */
  function showMessage(text, isError = false) {
    messageEl.textContent = text;
    messageEl.className = isError
      ? 'text-center text-danger mt-6'
      : 'text-center text-success mt-6';
  }

  function setLoading(btn, text, spinner, loading) {
    btn.disabled = loading;
    text.classList.toggle('hidden', loading);
    spinner.classList.toggle('hidden', !loading);
  }

  function redirect() {
    setTimeout(() => window.location.href = REDIRECT_URL, 800);
  }

  /* ===== SWITCH FORM ===== */
  document.getElementById('showRegister').onclick = () => {
    loginForm.classList.add('hidden');
    registerForm.classList.remove('hidden');
    showMessage('');
  };

  document.getElementById('showLogin').onclick = () => {
    registerForm.classList.add('hidden');
    loginForm.classList.remove('hidden');
    showMessage('');
  };

  /* ===== LOGIN ===== */
  loginBtn.onclick = async () => {
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value;

    if (!email || password.length < 6) {
      return showMessage('Email ho·∫∑c m·∫≠t kh·∫©u kh√¥ng h·ª£p l·ªá', true);
    }

    setLoading(loginBtn, loginText, loginSpinner, true);
    showMessage('ƒêang ƒëƒÉng nh·∫≠p...');

    const { error } = await supabaseClient.auth.signInWithPassword({
      email, password
    });

    setLoading(loginBtn, loginText, loginSpinner, false);

    if (error) showMessage(error.message, true);
    else {
      showMessage('ƒêƒÉng nh·∫≠p th√†nh c√¥ng!');
      redirect();
    }
  };

  /* ===== REGISTER ===== */
  registerBtn.onclick = async () => {
    const name = document.getElementById('regName').value.trim();
    const email = document.getElementById('regEmail').value.trim();
    const password = document.getElementById('regPassword').value;

    if (!name || !email || password.length < 6) {
      return showMessage('Vui l√≤ng nh·∫≠p ƒë·ªß th√¥ng tin h·ª£p l·ªá', true);
    }

    setLoading(registerBtn, registerText, registerSpinner, true);
    showMessage('ƒêang t·∫°o t√†i kho·∫£n...');

    const { error } = await supabaseClient.auth.signUp({
      email,
      password,
      options: { data: { full_name: name } }
    });

    setLoading(registerBtn, registerText, registerSpinner, false);

    if (error) showMessage(error.message, true);
    else {
      showMessage('üéâ ƒêƒÉng k√Ω th√†nh c√¥ng! Vui l√≤ng ƒëƒÉng nh·∫≠p');
      setTimeout(() => {
        registerForm.classList.add('hidden');
        loginForm.classList.remove('hidden');
        document.getElementById('email').value = email;
      }, 2000);
    }
  };

  /* ===== FORGOT PASSWORD ===== */
  document.getElementById('forgotBtn').onclick = async () => {
    const email = document.getElementById('email').value.trim();
    if (!email) return showMessage('Nh·∫≠p email tr∆∞·ªõc', true);

    const { error } = await supabaseClient.auth.resetPasswordForEmail(email);
    if (error) showMessage(error.message, true);
    else showMessage('ƒê√£ g·ª≠i email kh√¥i ph·ª•c ‚úÖ');
  };

  /* ===== OAUTH ===== */
  document.getElementById('googleBtn').onclick = () => {
    supabaseClient.auth.signInWithOAuth({
      provider: 'google',
      options: { redirectTo: REDIRECT_URL }
    });
  };

  document.getElementById('facebookBtn').onclick = () => {
    supabaseClient.auth.signInWithOAuth({
      provider: 'facebook',
      options: { redirectTo: REDIRECT_URL }
    });
  };
</script>

</body>
</html>